---
description: 
globs: 
alwaysApply: false
---
# Streamlitç•Œé¢å¼€å‘æŒ‡å—

## ç•Œé¢æ¶æ„
[main.py](mdc:main.py) å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„StreamlitèŠå¤©ç•Œé¢ï¼Œæ”¯æŒå®æ—¶å¯¹è¯å’Œä¼šè¯ç®¡ç†ã€‚

## æ ¸å¿ƒç•Œé¢ç»„ä»¶

### é¡µé¢å¸ƒå±€
- `st.title()` - åº”ç”¨æ ‡é¢˜ï¼š"ğŸ¤– æ™ºèƒ½èŠå¤©æœºå™¨äºº"
- `st.write()` - æ¬¢è¿ä¿¡æ¯å±•ç¤º
- `st.chat_input()` - åº•éƒ¨èŠå¤©è¾“å…¥æ¡†
- `st.chat_message()` - æ¶ˆæ¯æ°”æ³¡å±•ç¤º

### ä¼šè¯çŠ¶æ€ç®¡ç†
- `st.session_state.conversation_history` - å­˜å‚¨å®Œæ•´å¯¹è¯å†å²
- è‡ªåŠ¨æŒä¹…åŒ–ç”¨æˆ·ä¼šè¯
- å†å²é•¿åº¦é™åˆ¶ï¼ˆ20æ¡æ¶ˆæ¯ï¼‰

### äº¤äº’æµç¨‹
1. ç”¨æˆ·è¾“å…¥æ¶ˆæ¯
2. æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯æ°”æ³¡
3. æ˜¾ç¤º"æ€è€ƒä¸­..."çŠ¶æ€æŒ‡ç¤ºå™¨
4. è°ƒç”¨OpenAI APIè·å–å“åº”
5. æ˜¾ç¤ºAIå“åº”æ°”æ³¡
6. æ›´æ–°ä¼šè¯å†å²

## è¿è¡Œæ–¹å¼

### å¯åŠ¨å‘½ä»¤
```bash
# å¯åŠ¨Streamlitåº”ç”¨
uv run streamlit run main.py

# æŒ‡å®šç«¯å£
uv run streamlit run main.py --server.port 8502

# ç¦ç”¨è‡ªåŠ¨é‡è½½
uv run streamlit run main.py --server.runOnSave false
```

### è®¿é—®åœ°å€
- æœ¬åœ°å¼€å‘ï¼š`http://localhost:8501`
- ç½‘ç»œè®¿é—®ï¼š`http://0.0.0.0:8501`

## ç•Œé¢ç‰¹æ€§

### ç”¨æˆ·ä½“éªŒ
- å®æ—¶æ¶ˆæ¯å±•ç¤º
- è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
- åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨
- é”™è¯¯ä¿¡æ¯å‹å¥½æç¤º

### å“åº”å¼è®¾è®¡
- è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
- ç§»åŠ¨è®¾å¤‡å‹å¥½
- ç°ä»£åŒ–èŠå¤©ç•Œé¢é£æ ¼

## é«˜çº§åŠŸèƒ½æ‰©å±•

### å¯æ·»åŠ çš„Streamlitç»„ä»¶
```python
# ä¾§è¾¹æ é…ç½®
with st.sidebar:
    st.selectbox("é€‰æ‹©æ¨¡å‹", ["gpt-3.5-turbo", "gpt-4"])
    st.slider("æ¸©åº¦", 0.0, 2.0, 0.7)
    st.button("æ¸…é™¤å†å²")

# æ–‡ä»¶ä¸Šä¼ 
uploaded_file = st.file_uploader("ä¸Šä¼ æ–‡æ¡£", type=['txt', 'pdf'])

# å¤šåˆ—å¸ƒå±€
col1, col2 = st.columns(2)
with col1:
    st.button("å¯¼å‡ºå¯¹è¯")
with col2:
    st.button("åˆ†äº«å¯¹è¯")
```

### çŠ¶æ€ç®¡ç†æ‰©å±•
```python
# ç”¨æˆ·è®¾ç½®
if "user_settings" not in st.session_state:
    st.session_state.user_settings = {
        "model": "gpt-3.5-turbo",
        "temperature": 0.7,
        "max_tokens": 1000
    }

# å¯¹è¯åˆ†ç±»
if "conversation_topics" not in st.session_state:
    st.session_state.conversation_topics = []
```

## éƒ¨ç½²é…ç½®

### Streamlité…ç½®æ–‡ä»¶
åˆ›å»º `.streamlit/config.toml`ï¼š
```toml
[server]
port = 8501
enableCORS = false
enableXsrfProtection = false

[theme]
primaryColor = "#FF6B6B"
backgroundColor = "#FFFFFF"
secondaryBackgroundColor = "#F0F2F6"
textColor = "#262730"
```

### ç”Ÿäº§éƒ¨ç½²
```bash
# ä½¿ç”¨Streamlit Cloud
# æˆ–è€…Dockeréƒ¨ç½²
# æˆ–è€…ä½¿ç”¨å…¶ä»–äº‘å¹³å°
```

## é”™è¯¯å¤„ç†

### APIé”™è¯¯å¤„ç†
- OpenAI APIå¯†é’¥éªŒè¯
- ç½‘ç»œè¿æ¥æ£€æŸ¥
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

### ç•Œé¢å¼‚å¸¸å¤„ç†
- ä¼šè¯çŠ¶æ€æ¢å¤
- è¾“å…¥éªŒè¯
- ä¼˜é›…é™çº§

## æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥
```python
@st.cache_data
def load_model_info():
    return {"models": ["gpt-3.5-turbo", "gpt-4"]}

@st.cache_resource
def init_openai_client():
    return OpenAI(api_key=os.getenv("OPENAI_API_KEY"))
```

### å“åº”ä¼˜åŒ–
- æµå¼å“åº”æ˜¾ç¤º
- å¼‚æ­¥APIè°ƒç”¨
- æ¶ˆæ¯åˆ†é¡µåŠ è½½

## å¼€å‘è°ƒè¯•

### è°ƒè¯•æŠ€å·§
```python
# æ˜¾ç¤ºä¼šè¯çŠ¶æ€ï¼ˆå¼€å‘æ—¶ï¼‰
st.write(st.session_state)

# æ·»åŠ è°ƒè¯•ä¿¡æ¯
st.write(f"å½“å‰å†å²é•¿åº¦: {len(st.session_state.conversation_history)}")
```

### çƒ­é‡è½½
Streamlitæ”¯æŒä»£ç ä¿®æ”¹åè‡ªåŠ¨é‡è½½ï¼Œä¾¿äºå¼€å‘è°ƒè¯•ã€‚
